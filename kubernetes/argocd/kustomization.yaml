apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: argocd

resources:
- https://raw.githubusercontent.com/argoproj/argo-cd/master/manifests/ha/install.yaml
- namespace.yaml

patchesStrategicMerge:
- overlays/argocd-cmd-params-cm.yaml

secretGenerator:
  - name: cloudflare-token-secret
    envs:
    - cloudflaretoken.env
    type: Opaque
    options:
      annotations:
        reflector.v1.k8s.emberstack.com/reflection-allowed: "true"
        reflector.v1.k8s.emberstack.com/reflection-auto-enabled: "true"
        reflector.v1.k8s.emberstack.com/reflection-auto-namespaces: "cert-manager"

generatorOptions:
 disableNameSuffixHash: true