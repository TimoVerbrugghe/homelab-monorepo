# Apply all these resources with `kubectl apply -k .` from the directory containing this file
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

secretGenerator:
  - name: bitwarden-secret
    namespace: bitwarden
    envs:
      - bitwarden-secrets.env
    type: Opaque
  - name: bitwarden-export-secret
    namespace: bitwarden
    envs:
      - bitwarden-export-secrets.env
    type: Opaque

generatorOptions:
  disableNameSuffixHash: true

resources:
  - namespace.yaml
  - bitwarden.yaml
  - bitwarden-ingress.yaml
  - bitwarden-service.yaml
  - bitwarden-backup.yaml
  - bitwarden-export.yaml