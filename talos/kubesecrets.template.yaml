# Add some secrets needed to bootstrap the cluster that will be patched together with the base-config.yaml
cluster:
  inlineManifests:
    - name: cloudflare-token-secret # Name of the manifest.
      contents: |- # Manifest contents as a string.
        apiVersion: v1
        kind: Secret
        metadata:
          name: cloudflare-token-secret
          namespace: kube-system
          annotations:  
            reflector.v1.k8s.emberstack.com/reflection-allowed: "true"
            reflector.v1.k8s.emberstack.com/reflection-auto-enabled: "true"
            reflector.v1.k8s.emberstack.com/reflection-auto-namespaces: "cert-manager, traefik"
        type: Opaque
        stringData:
          cloudflare-token: <cloudflare-token>

    - name: operator-oauth
      contents: |-
        apiVersion: v1
        kind: Secret
        metadata:
          name: operator-oauth
          namespace: kube-system
          annotations:  
            reflector.v1.k8s.emberstack.com/reflection-allowed: "true"
            reflector.v1.k8s.emberstack.com/reflection-auto-enabled: "true"
            reflector.v1.k8s.emberstack.com/reflection-auto-namespaces: "tailscale"
        type: Opaque
        stringData:
          client_id: <tailscale_client_id>
          client_secret: <tailscale_client_secret>

    - name: traefik-forward-auth-secrets
      contents: |-
        apiVersion: v1
        kind: Secret
        metadata:
          name: traefik-forward-auth-secrets
          namespace: kube-system
          annotations:  
            reflector.v1.k8s.emberstack.com/reflection-allowed: "true"
            reflector.v1.k8s.emberstack.com/reflection-auto-enabled: "true"
            reflector.v1.k8s.emberstack.com/reflection-auto-namespaces: "authentication"
        type: Opaque

        # Values retrieved from app registration done in Azure portal
        stringData:
          client-id: <client-id>
          client-secret: <client-secret>
          secret: <secret>
          issuer-url: https://login.microsoftonline.com/<tenant-id>/v2.0
          whitelist: <whitelist>
      
    - name: adguardhome-sync-secrets
      contents: |-
        apiVersion: v1
        kind: Secret
        metadata:
          name: traefik-forward-auth-secrets
          namespace: kube-system
          annotations:  
            reflector.v1.k8s.emberstack.com/reflection-allowed: "true"
            reflector.v1.k8s.emberstack.com/reflection-auto-enabled: "true"
            reflector.v1.k8s.emberstack.com/reflection-auto-namespaces: "adguardhome"
        type: Opaque
        stringData:
          origin-password: <origin-password>
          replica1-password: <replica1-password>
          replica2-password: <replica2-password>