- name: Add udev rule for scanner
  ansible.builtin.copy:
    dest: "/lib/udev/rules.d/99-scanner"
    content: |
        #make sure the scanner is reachable under the same name (/dev/scanner) regardless of USB port by mapping it through Vendor ID & Product ID
        ATTRS{idVendor}=="{{ scanner_vendor_id }}", ATTRS{idProduct}=="{{ scanner_product_id }}", MODE="0664", GROUP="scanner", ENV{libsane_matched}="yes", SYMLINK+="scanner"
    mode: '0644'

- name: Restart udev service
  ansible.builtin.systemd:
    name: udev
    state: restarted
